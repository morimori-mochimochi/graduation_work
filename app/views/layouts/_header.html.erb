<%# class に指定されているクラスは Bootstrap のスタイルを適用するためのもの %>
<%# navbar → ナビゲーションバー用の基本クラス %>
<%# navbar-expand-lg → 画面幅が「large（992px）以上」のとき横に展開、それ以下は折りたたむ %>
<% menu_should_be_visible = [walk_routes_path, car_routes_path].include?(request.path) %>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <%# container-fluid は、左右に余白がなく画面いっぱいに広がるコンテナ %>
  <div class="container-fluid">
    <%# <a> タグはリンク %>
    <%= render 'shared/component/login_info' %>

    <%# ここがポイント: メニューを表示すべき場合にのみ、HTML全体を描画する %>
    <% if menu_should_be_visible %>
      <%# navbar-toggler → 小さい画面で表示されるボタン %>
      <%# data-bs-toggle="collapse" → 折りたたみ機能（クリックで開閉）%>
      <%# data-bs-target="#navbarNav" → 開閉させる対象のIDを指定 %>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <%# <ul> → メニュー項目のリスト %>
        <%  1 # navbar-nav → ナビゲーション用のリストスタイル.横並びに整列 %>
        <%# gap-3 を追加してアイテム間の間隔を広げる（数字は 1~5 で調整可能） %>
        <ul class="navbar-nav ms-auto gap-0">
          <%
            menu_items = [
              { path: calendar_path, image: "/images/calendar.png", alt: "calendar", message: "カレンダーの閲覧にはログインが必要です。" },
              { path: save_routes_path, image: "/images/saved_routes.png", alt: "routes_logo", message: "保存したルートの閲覧にはログインが必要です。" },
              { path: locations_path, image: "/images/saved_locations.png", alt: "locations_logo", message: "保存した場所の閲覧にはログインが必要です。" }
            ]
          %>
          <% menu_items.each do |item| %>
            <li class="nav-item">
              <% if user_signed_in? %>
                <%= link_to item[:path], class: "nav-link" do %>
                  <%= image_tag item[:image], alt: item[:alt], class: "h-17" %>
                <% end %>
              <% else %>
                <%= button_tag type: 'button', class: "nav-link bg-transparent border-0", onclick: "alert('#{item[:message]}')" do %>
                  <%= image_tag item[:image], alt: item[:alt], class: "btn_effect h-17 opacity-50" %>
                <% end %>
              <% end %>
            </li>
          <% end %>

          <li class="nav-item">
            <%= link_to root_path, class: "nav-link" do %>
              <%= image_tag "/images/top.png", alt: "load_top", class: "h-17" %>
            <% end %>
          </li>
        </ul>
      </div>
    <% end %>
  </div>
</nav>
