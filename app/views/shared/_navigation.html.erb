<script>
  function startNavigation() {
    // #現在地マーカー
    let currentMarker;
    // #drawRouteで取得された現在地を使う
    const currentPos = window.currentPos;

      // #最初の一回はマーカーを作成。それ以降はそれを更新
      if (!currentMarker) {
        currentMarker = new google.maps.Marker({
          position: currentPos,
          map: window.map,
          title: "現在地"
        });
      }else{
        currentMarker.setPosition(currentPos);
      }
      // #マップを現在位置へ追従
      window.map.panTo(currentPos);
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    const naviBtn = document.getElementById("naviBtn");
    naviBtn.addEventListener("click", () => {
      startNavigation();
    });
  });
</script>